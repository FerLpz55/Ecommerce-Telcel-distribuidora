<div class="catalog-page-container">
  <!-- Sidebar de Filtros -->
  <aside class="filters-sidebar">
    <h3><i class="fas fa-filter"></i> Filtros</h3>

    <div class="filter-section">
      <h4><i class="fas fa-search"></i> Buscar</h4>
      <div class="search-input">
        <input type="text" [(ngModel)]="searchTerm" (keyup.enter)="onSearch()" placeholder="Buscar productos...">
      </div>
    </div>

    <div class="filter-section">
      <h4><i class="fas fa-tags"></i> Categorías</h4>
      <div class="filter-options">
        <div class="filter-option" (click)="filterByCategory(null)">
          <input type="checkbox" [checked]="selectedCategory === null" id="cat-all">
          <label for="cat-all">Todos</label>
        </div>
        @for (cat of categories; track cat.id_categoria) {
          <div class="filter-option" (click)="filterByCategory(cat.id_categoria)">
            <input type="checkbox" [checked]="selectedCategory === cat.id_categoria" [id]="'cat-' + cat.id_categoria">
            <label [for]="'cat-' + cat.id_categoria">{{ cat.nombre }}</label>
          </div>
        }
      </div>
    </div>

    <button class="btn-reset-filters" (click)="resetFilters()">
      <i class="fas fa-undo"></i> Limpiar filtros
    </button>
  </aside>

  <!-- Área principal de productos -->
  <main class="products-main-area">
    <div class="products-header">
      <div class="header-title-section">
        <h2><i class="fas fa-box-open"></i> Productos</h2>
        <span class="product-count">{{ products.length }} productos encontrados</span>
      </div>
    </div>

    @if (loading) {
      <div class="loading-state">
        <i class="fas fa-spinner fa-spin"></i>
        <p>Cargando productos...</p>
      </div>
    } @else if (products.length === 0) {
      <div class="no-products">
        <i class="fas fa-search"></i>
        <h3>No se encontraron productos</h3>
        <p>Intenta con otra búsqueda o categoría</p>
      </div>
    } @else {
      <div class="products-grid">
        @for (product of products; track product.id_producto) {
          <app-product-card [product]="product" />
        }
      </div>

      @if (totalPages > 1) {
        <div class="pagination">
          <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">
            <i class="fas fa-chevron-left"></i> Anterior
          </button>
          @for (page of pages; track page) {
            <button [class.active]="page === currentPage" (click)="goToPage(page)">{{ page }}</button>
          }
          <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages">
            Siguiente <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      }
    }
  </main>
</div>
